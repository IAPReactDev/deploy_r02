import{j as e,W as v,s as n,a as f,C as E,b as C,F as p,c as u,d as j,e as S,f as J,l as s,r as m,A as Y,g as q,T as Q,h as X,H as ee,i as ne}from"./index-BVX_wID5.js";const k=[{countryCode:"VN",country:"Vietnam",timezone:"Asia/Bangkok"}],te={VN:[{id:1,cityname:"Hanoi",vietnamese_name:"Hà Nội",latitude:"21.0245",longitude:"105.84117",class:"special"},{id:2,cityname:"Ho Chi Minh",vietnamese_name:"Hồ Chí Minh",latitude:10.82302,longitude:106.62965,class:"special"},{id:3,cityname:"Da Nang",vietnamese_name:"Đà Nẵng",latitude:16.06778,longitude:108.22083,class:"I"},{id:4,cityname:"Haiphong",vietnamese_name:"Hải Phòng",latitude:20.86481,longitude:106.68345,class:"I"},{id:5,cityname:"Huế",vietnamese_name:"Huế",latitude:16.4619,longitude:107.59546,class:"I"},{id:6,cityname:"Cần Thơ",vietnamese_name:"Cần Thơ",latitude:10.03711,longitude:105.78825,class:"I"}],NZ:[]},W={0:{day:{description:"Sunny",icon_xl:e.jsx(v,{className:n["icon--x52"]}),icon_md:e.jsx(v,{className:n["icon--x32"]}),icon_sm:e.jsx(v,{className:n["icon--x16"]})},night:{description:"Clear",icon_xl:e.jsx(f,{className:n["icon--x52"]}),icon_md:e.jsx(f,{className:n["icon--x32"]}),icon_sm:e.jsx(f,{className:n["icon--x16"]})}},1:{day:{description:"Mainly Sunny",icon_xl:e.jsx(v,{className:n["icon--x52"]}),icon_md:e.jsx(v,{className:n["icon--x32"]}),icon_sm:e.jsx(v,{className:n["icon--x16"]})},night:{description:"Mainly Clear",icon_xl:e.jsx(f,{className:n["icon--x52"]}),icon_md:e.jsx(f,{className:n["icon--x32"]}),icon_sm:e.jsx(f,{className:n["icon--x16"]})}},2:{day:{description:"Partly Cloudy",icon_xl:e.jsx(E,{className:n["icon--x52"]}),icon_md:e.jsx(E,{className:n["icon--x32"]}),icon_sm:e.jsx(E,{className:n["icon--x16"]})},night:{description:"Partly Cloudy",icon_xl:e.jsx(E,{className:n["icon--x52"]}),icon_md:e.jsx(E,{className:n["icon--x32"]}),icon_sm:e.jsx(E,{className:n["icon--x16"]})}},3:{day:{description:"Cloudy",icon_xl:e.jsx(C,{className:n["icon--x52"]}),icon_md:e.jsx(C,{className:n["icon--x32"]}),icon_sm:e.jsx(C,{className:n["icon--x16"]})},night:{description:"Cloudy",icon_xl:e.jsx(C,{className:n["icon--x52"]}),icon_md:e.jsx(C,{className:n["icon--x32"]}),icon_sm:e.jsx(C,{className:n["icon--x16"]})}},45:{day:{description:"Foggy",icon_xl:e.jsx(p,{className:n["icon--x52"]}),icon_md:e.jsx(p,{className:n["icon--x32"]}),icon_sm:e.jsx(p,{className:n["icon--x16"]})},night:{description:"Foggy",icon_xl:e.jsx(p,{className:n["icon--x52"]}),icon_md:e.jsx(p,{className:n["icon--x32"]}),icon_sm:e.jsx(p,{className:n["icon--x16"]})}},48:{day:{description:"Rime Fog",icon_xl:e.jsx(p,{className:n["icon--x52"]}),icon_md:e.jsx(p,{className:n["icon--x32"]}),icon_sm:e.jsx(p,{className:n["icon--x16"]})},night:{description:"Rime Fog",icon_xl:e.jsx(p,{className:n["icon--x52"]}),icon_md:e.jsx(p,{className:n["icon--x32"]}),icon_sm:e.jsx(p,{className:n["icon--x16"]})}},51:{day:{description:"Light Drizzle",image:"http://openweathermap.org/img/wn/09d@2x.png"},night:{description:"Light Drizzle",image:"http://openweathermap.org/img/wn/09n@2x.png"}},53:{day:{description:"Drizzle",image:"http://openweathermap.org/img/wn/09d@2x.png"},night:{description:"Drizzle",image:"http://openweathermap.org/img/wn/09n@2x.png"}},55:{day:{description:"Heavy Drizzle",image:"http://openweathermap.org/img/wn/09d@2x.png"},night:{description:"Heavy Drizzle",image:"http://openweathermap.org/img/wn/09n@2x.png"}},56:{day:{description:"Light Freezing Drizzle",image:"http://openweathermap.org/img/wn/09d@2x.png"},night:{description:"Light Freezing Drizzle",image:"http://openweathermap.org/img/wn/09n@2x.png"}},57:{day:{description:"Freezing Drizzle",image:"http://openweathermap.org/img/wn/09d@2x.png"},night:{description:"Freezing Drizzle",image:"http://openweathermap.org/img/wn/09n@2x.png"}},61:{day:{description:"Light Rain",icon_xl:e.jsx(u,{className:n["icon--x52"]}),icon_md:e.jsx(u,{className:n["icon--x32"]}),icon_sm:e.jsx(u,{className:n["icon--x16"]})},night:{description:"Light Rain",icon_xl:e.jsx(u,{className:n["icon--x52"]}),icon_md:e.jsx(u,{className:n["icon--x32"]}),icon_sm:e.jsx(u,{className:n["icon--x16"]})}},63:{day:{description:"Rain",icon_xl:e.jsx(u,{className:n["icon--x52"]}),icon_md:e.jsx(u,{className:n["icon--x32"]}),icon_sm:e.jsx(u,{className:n["icon--x16"]})},night:{description:"Rain",icon_xl:e.jsx(u,{className:n["icon--x52"]}),icon_md:e.jsx(u,{className:n["icon--x32"]}),icon_sm:e.jsx(u,{className:n["icon--x16"]})}},65:{day:{description:"Heavy Rain",icon_xl:e.jsx(j,{className:n["icon--x52"]}),icon_md:e.jsx(j,{className:n["icon--x32"]}),icon_sm:e.jsx(j,{className:n["icon--x16"]})},night:{description:"Heavy Rain",icon_xl:e.jsx(j,{className:n["icon--x52"]}),icon_md:e.jsx(j,{className:n["icon--x32"]}),icon_sm:e.jsx(j,{className:n["icon--x16"]})}},66:{day:{description:"Light Freezing Rain",image:"http://openweathermap.org/img/wn/10d@2x.png"},night:{description:"Light Freezing Rain",image:"http://openweathermap.org/img/wn/10n@2x.png"}},67:{day:{description:"Freezing Rain",image:"http://openweathermap.org/img/wn/10d@2x.png"},night:{description:"Freezing Rain",image:"http://openweathermap.org/img/wn/10n@2x.png"}},71:{day:{description:"Light Snow",image:"http://openweathermap.org/img/wn/13d@2x.png"},night:{description:"Light Snow",image:"http://openweathermap.org/img/wn/13n@2x.png"}},73:{day:{description:"Snow",image:"http://openweathermap.org/img/wn/13d@2x.png"},night:{description:"Snow",image:"http://openweathermap.org/img/wn/13n@2x.png"}},75:{day:{description:"Heavy Snow",image:"http://openweathermap.org/img/wn/13d@2x.png"},night:{description:"Heavy Snow",image:"http://openweathermap.org/img/wn/13n@2x.png"}},77:{day:{description:"Snow Grains",image:"http://openweathermap.org/img/wn/13d@2x.png"},night:{description:"Snow Grains",image:"http://openweathermap.org/img/wn/13n@2x.png"}},80:{day:{description:"Light Showers",icon_xl:e.jsx(S,{className:n["icon--x52"]}),icon_md:e.jsx(S,{className:n["icon--x32"]}),icon_sm:e.jsx(S,{className:n["icon--x16"]})},night:{description:"Light Showers",icon_xl:e.jsx(S,{className:n["icon--x52"]}),icon_md:e.jsx(S,{className:n["icon--x32"]}),icon_sm:e.jsx(S,{className:n["icon--x16"]})}},81:{day:{description:"Showers",icon_xl:e.jsx(u,{className:n["icon--x52"]}),icon_md:e.jsx(u,{className:n["icon--x32"]}),icon_sm:e.jsx(u,{className:n["icon--x16"]})},night:{description:"Showers",icon_xl:e.jsx(u,{className:n["icon--x52"]}),icon_md:e.jsx(u,{className:n["icon--x32"]}),icon_sm:e.jsx(u,{className:n["icon--x16"]})}},82:{day:{description:"Heavy Showers",icon_xl:e.jsx(j,{className:n["icon--x52"]}),icon_md:e.jsx(j,{className:n["icon--x32"]}),icon_sm:e.jsx(j,{className:n["icon--x16"]})},night:{description:"Heavy Showers",icon_xl:e.jsx(j,{className:n["icon--x52"]}),icon_md:e.jsx(j,{className:n["icon--x32"]}),icon_sm:e.jsx(j,{className:n["icon--x16"]})}},85:{day:{description:"Light Snow Showers",image:"http://openweathermap.org/img/wn/13d@2x.png"},night:{description:"Light Snow Showers",image:"http://openweathermap.org/img/wn/13n@2x.png"}},86:{day:{description:"Snow Showers",image:"http://openweathermap.org/img/wn/13d@2x.png"},night:{description:"Snow Showers",image:"http://openweathermap.org/img/wn/13n@2x.png"}},95:{day:{description:"Thunderstorm",image:"http://openweathermap.org/img/wn/11d@2x.png"},night:{description:"Thunderstorm",image:"http://openweathermap.org/img/wn/11n@2x.png"}},96:{day:{description:"Light Thunderstorms With Hail",image:"http://openweathermap.org/img/wn/11d@2x.png"},night:{description:"Light Thunderstorms With Hail",image:"http://openweathermap.org/img/wn/11n@2x.png"}},99:{day:{description:"Thunderstorm With Hail",image:"http://openweathermap.org/img/wn/11d@2x.png"},night:{description:"Thunderstorm With Hail",image:"http://openweathermap.org/img/wn/11n@2x.png"}}};function M(t){return t.split(" ").map(a=>a.toLowerCase()).join("-")}function se({children:t,isSmall:a}){return e.jsx(e.Fragment,{children:e.jsx("div",{className:[n.select__box,a&&n["select__box--small"]].join(" "),children:t})})}function ae({children:t,name:a,isSmall:c,isError:i}){return e.jsx(e.Fragment,{children:e.jsx("div",{id:`${a}Current`,className:[n.select__current,c?n["select__current--small"]:"",i?n["select__current--error"]:""].join(" "),tabIndex:1,children:t})})}function ie({dataItem:t,name:a,handleChange:c,checkedItem:i,setCheckedItem:o}){const{isChecked:l}=i,r=t.map((d,h)=>e.jsxs("div",{className:n.select__value,children:[e.jsx("input",{className:n.select__input,type:"radio",id:`${a}-${M(d.countryCode)}`,value:h,name:a,checked:l==h,onClick:()=>{o({isChecked:h})},onChange:c}),e.jsx("span",{className:n["select__input-text"],children:d.country})]},h));return e.jsxs(e.Fragment,{children:[r,e.jsx(J,{className:n.select__icon})]})}function ce({dataItem:t,name:a}){const c=t.map(i=>e.jsx("li",{children:e.jsx("label",{htmlFor:`${a}-${M(i.countryCode)}`,children:i.country})},i.countryCode));return e.jsx(e.Fragment,{children:e.jsx("ul",{className:n.select__list,children:c})})}const re=({name:t,listData:a,handleChange:c,checkedItem:i,setCheckedItem:o,isSmall:l,isError:r=!1})=>e.jsxs(se,{isSmall:l,children:[e.jsx(ae,{name:t,isSmall:l,isError:r,children:e.jsx(ie,{dataItem:a,name:t,handleChange:c,checkedItem:i,setCheckedItem:o})}),e.jsx(ce,{dataItem:a,name:t})]}),oe=({children:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:[s["basis-sm-4"],s["basis-12"]].join(" "),children:t})}),le=({countriesData:t,handleChange:a,checkedCountry:c,setCheckedCountry:i})=>e.jsx(e.Fragment,{children:e.jsx(oe,{children:e.jsx(re,{name:"country",listData:t,handleChange:a,checkedItem:c,setCheckedItem:i,isSmall:!1})})}),b=m.createContext(null),O="https://api.open-meteo.com/v1/forecast",T={weekdays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},L={empty_value:"The city name can not empty!",city_notfound:"City not found!",invalid_route:"Route doesn't exist!",default_error:"Something went wrong, please try again later!"};function me(t){const a={u:/\u00F9|\u00FA|\u1EE7|\u0169|\u1EE5|\u1EEB|\u1EE9|\u1EED|\u1EEF|\u1EF1|\u01B0/g,e:/\u00E8|\u00E9|\u1EBB|\u1EBD|\u1EB9|\u1EC1|\u1EBF|\u1EC3|\u1EC5|\u1EC7|\u00EA/g,o:/\u00F2|\u00F3|\u1ECF|\u00F5|\u1ECD|\u1ED3|\u1ED1|\u1ED5|\u1ED7|\u1ED9|\u00F4|\u1EDD|\u1EDB|\u1EDF|\u1EE1|\u1EE3|\u01A1/g,a:/\u00E0|\u00E1|\u1EA3|\u00E3|\u1EA1|\u1EB1|\u1EAF|\u1EB3|\u1EB5|\u1EB7|\u0103|\u1EA7|\u1EA5|\u1EA9|\u1EAB|\u1EAD|\u00E2/g,i:/\u00EC|\u00ED|\u1EC9|\u0129|\u1ECB/g},c={d:/\u0111/g,y:/\u1EF3|\u00FD|\u1EF5|\u1EF7|\u1EF9/g},i={accents:/\u0300|\u0301|\u0303|\u0309|\u0323/g,individual:/\u02C6|\u0306|\u031B/g};return t=t.replace(a.u,"u"),t=t.replace(a.e,"e"),t=t.replace(a.o,"o"),t=t.replace(a.a,"a"),t=t.replace(a.i,"i"),t=t.replace(c.d,"d"),t=t.replace(c.y,"y"),t=t.replace(i.accents,""),t=t.replace(i.individual,""),t}function z({searchStr:t,countryCode:a,withoutSpaces:c=!1}){let i=t.toLowerCase();return a=="VN"&&(i=me(i)),c==!0&&(i=i.replace(/\s+/g,"")),i}const de=({handleClick:t,children:a})=>e.jsx(e.Fragment,{children:e.jsx("button",{className:[n.btn,n["btn--inform"]].join(" "),onClick:t,children:a})}),ue=({title:t,name:a,inputValue:c,handleTextChange:i,handleKeyDown:o,isError:l,children:r})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:[n.form__wrap,n["mb-8"]].join(" "),children:[e.jsx("input",{className:[n.form__input,n["form__input--from"],l.status&&n.form__error].join(" "),type:"text",name:a,id:a,required:!0,value:c,onChange:i,onKeyDown:o}),e.jsx("label",{className:n.form__title,htmlFor:"city_name",children:t}),e.jsx("span",{className:[n["form__error-msg"],l.status&&n["form__error-msg--show"]].join(" "),children:l.message}),r]})}),xe=({children:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:[s["basis-md-8"],s["basis-12"],n.relative].join(" "),children:t})}),he=({countryData:t,children:a})=>{const[c,i]=m.useState(""),[o,l]=m.useState([]),[r,d]=m.useState(0),[h,_]=m.useState({}),[F,g]=m.useState({status:!1,message:""}),y=te[t.code],w=m.useRef(null);m.useEffect(()=>{if(c.length>0&&Object.keys(h).length==0){const x=y.filter(N=>{const $=z({searchStr:N.cityname.toString(),countryCode:t.code.toString()}),H=z({searchStr:c.toString(),countryCode:t.code.toString()}),K=z({searchStr:N.cityname.toString(),countryCode:t.code.toString(),withoutSpaces:!0}),G=z({searchStr:c.toString(),countryCode:t.code.toString(),withoutSpaces:!0});return $.includes(H)||K.includes(G)});l(x),g({status:!1,message:""})}else l([])},[t.code,y,h,c]),m.useEffect(()=>{const x=N=>{const $=w.current.querySelectorAll("li");N.key=="ArrowUp"?d(H=>(H-1+$.length)%$.length):N.key=="ArrowDown"&&d(H=>(H+1)%$.length)};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[]);function D(x){i(x.target.value),d(0),_({}),g({status:!1,message:""})}function U(x){x.key=="Enter"&&(o.length>0?(i(o[r].vietnamese_name),_(o[r]),g({status:!1,message:""})):(console.log("not found"),console.log("call api search lat and lng"),g({status:!0,message:L.city_notfound})),x.target.value==""&&g({status:!0,message:L.empty_value}))}function P(x){i(x.target.dataset.vietnamese_name),_(y[x.target.dataset.id-1]),l([])}function Z(){document.getElementById("city_name").value.length==0&&g({status:!0,message:L.empty_value}),o.length>0?(i(o[r].vietnamese_name),_(o[r]),l([]),g({status:!1,message:""})):(console.log("not found, call api search lat and lng"),g({status:!0,message:L.city_notfound}))}return e.jsxs(e.Fragment,{children:[e.jsxs(xe,{children:[e.jsx(ue,{title:"City's name",name:"city_name",inputValue:c,handleTextChange:D,handleKeyDown:U,isError:F,children:e.jsx(de,{handleClick:Z,children:e.jsx(Y,{className:n["icon--x20"]})})}),e.jsx("div",{ref:w,children:o.length>0?e.jsx("ul",{className:n.suggestion,children:o.map((x,N)=>e.jsx("li",{className:[n.suggestion__item,r===N?`${n["suggestion__item--active"]}`:""].join(" "),onClick:P,"data-id":x.id,"data-vietnamese_name":x.vietnamese_name,children:x.vietnamese_name},N))}):""})]}),e.jsx(b.Provider,{value:{selectedCity:[h,_],timeZone:t.timezone},children:a})]})},V=({url:t})=>{const[a,c]=m.useState(null),[i,o]=m.useState(!0),[l,r]=m.useState(null);return m.useEffect(()=>{(async()=>{try{const _=await(await fetch(t)).json();c(_)}catch(h){r(h)}finally{o(!1)}})()},[t]),{data:a,isLoading:i,error:l}},I=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:n.preloader,children:e.jsx("div",{className:n.loader})})}),A=({children:t,cityName:a})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:[n.wwa__main,n.box,s["basis-md-8"],s["basis-12"]].join(" "),children:[e.jsx("h3",{className:[n.wwa__title,n["mb-20"]].join(" "),children:a}),e.jsx("div",{className:[s.grid,s["grid-1"],s["gap-3"],s["mb-12"]].join(" "),children:t})]})}),ge=({props:t})=>{const a=new Date,c=T.weekdays[a.getDay()],i=T.months[a.getMonth()],o=a.getDate(),l=a.getFullYear(),r=a.getHours(),d=a.getMinutes();return e.jsx(e.Fragment,{children:e.jsxs("div",{className:[s.flex,s["flex--x"],s["flex--center"],s["gap-3"]].join(" "),children:[e.jsxs("div",{className:[s.flex,s["flex--y"],n["al-center"],s["gap-1"]].join(" "),children:[e.jsx("h4",{className:[n.wwa__current,n["wwa__current--date"]].join(" "),children:`${c}, ${i} ${o<10?"0":""}${o} ${l}`}),e.jsx("span",{className:[n.wwa__current,n["wwa__current--time"]].join(" "),children:`${r<10?"0":""}${r}:${d<10?"0":""}${d}`})]}),t.isDay==0&&a.getHours()>=18?e.jsx(f,{className:n["icon--x24"]}):e.jsx(q,{className:n["icon--x24"]})]})})},pe=({props:t})=>{const a=t.current.temperature_2m,c=t.daily.apparent_temperature_min,i=t.daily.apparent_temperature_max,o=t.unitDegree;return e.jsx(e.Fragment,{children:e.jsxs("div",{className:[s.flex,s["flex--y"],s["gap-2"],n["al-center"]].join(" "),children:[e.jsx("span",{className:n["wwa__current-temperature"],children:`${a}${o}`}),e.jsxs("div",{className:[n["wwa__low-high"],s.flex,s["flex--nowrap"],s["gap-2"]].join(" "),children:[e.jsxs("span",{className:[s.flex,s["flex--nowrap"],n["al-center"]].join(" "),children:[e.jsx(Q,{className:n["icon--x20"]}),e.jsx("span",{children:`${c}${o}`})]}),e.jsxs("span",{className:[s.flex,s["flex--nowrap"],n["al-center"]].join(" "),children:[e.jsx(X,{className:n["icon--x20"]}),e.jsx("span",{children:`${i}${o}`})]})]})]})})},je=({props:t})=>{const a=W[t.weather_code];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:[s.flex,s["flex--y"],n["al-center"]].join(" "),children:[t.isDay==0?a.night.icon_xl:a.day.icon_xl,e.jsx("span",{className:n["wwa__wmo-code"],children:t.isDay==0?a.night.description:a.day.description})]})})},_e=({props:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:[n["box--nested"]],children:e.jsxs("div",{className:[s.flex,s["flex--wrap"],n["space-bet"],s["gap-5"]].join(" "),children:[e.jsxs("div",{className:[n["wwa__detail-item"],s.flex,s["flex--nowrap"],s["flex--y-center"],s["gap-2"]].join(" "),children:[e.jsx(ee,{className:n["icon--x20"]}),e.jsx("span",{children:`${t.current.relative_humidity_2m}${t.current_units.relative_humidity_2m}`})]}),e.jsxs("div",{className:[n["wwa__detail-item"],s.flex,s["flex--nowrap"],s["flex--y-center"],s["gap-2"]].join(" "),children:[e.jsx(u,{className:n["icon--x20"]}),e.jsx("span",{children:`${t.current.rain}${t.current_units.rain}`})]}),e.jsxs("div",{className:[n["wwa__detail-item"],s.flex,s["flex--nowrap"],s["flex--y-center"],s["gap-2"]].join(" "),children:[e.jsx(ne,{className:n["icon--x20"]}),e.jsx("span",{children:`${t.current.wind_speed_10m}${t.current_units.wind_speed_10m}`})]}),e.jsxs("div",{className:[n["wwa__detail-item"],s.flex,s["flex--nowrap"],s["flex--y-center"],s["gap-2"]].join(" "),children:[e.jsx(C,{className:n["icon--x20"]}),e.jsx("span",{children:`${t.current.cloud_cover}${t.current_units.cloud_cover}`})]})]})})}),R=({children:t,props:a})=>{const{indexMatchingData:c}=m.useContext(b),[i,o]=m.useState(c),l=m.useRef(null),r=a.hourlyTime,d=a.hourlyTemp,h=a.hourlyWeatherCode;m.useEffect(()=>{const y=l.current,w=D=>{D.preventDefault(),D.deltaY>0&&i<r.length-3?o(i+1):D.deltaY<0&&i>2&&o(i-1)};if(y)return y.addEventListener("wheel",w,{passive:!1}),()=>{y.removeEventListener("wheel",w)}},[r.length,i,a.indexMatching]);const _=r.slice(i-2,i+3),F=d.slice(i-2,i+3),g=h.slice(i-2,i+3);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:[n.box,s["basis-md-4"],s["basis-12"]].join(" "),children:[e.jsx("h3",{className:[n.wwa__title,n["mb-20"]].join(" "),children:"Hourly"}),t,a.hourlyTime.length>0&&e.jsxs("section",{ref:l,className:[n.timeline,n.wwa__hourly].join(" "),children:[e.jsx("div",{className:n.timeline__line}),e.jsx("div",{className:n.timeline__main,children:_.map((y,w)=>e.jsx(ye,{props:{datetime:y,temperature:F[w],weathercode:g[w],unit:a.unit}},w))})]})]})})},ye=({props:t})=>{const a=new Date(t.datetime),c=a.getHours(),i=a.getMinutes();let l=new Date().getHours();const r=W[t.weathercode];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:[n.hourly,s.flex,s["flex--x-end"],s["flex--y-start"],s["flex--nowrap"],s["gap-2"],l==a.getHours()?n["hourly--active"]:""].join(" "),children:[e.jsxs("div",{className:[s.flex,s["flex--y"],s["flex--y-end"],s["gap-1"]].join(" "),children:[e.jsxs("div",{className:[s.flex,s["flex--y-end"],s["gap-1"]].join(" "),children:[e.jsx("span",{className:n.hourly__temperature,children:`${t.temperature}${t.unit}`}),c>=18?r.night.icon_sm:r.day.icon_sm]}),e.jsx("span",{children:c>=18?r.night.description:r.day.description})]}),e.jsx("div",{className:[n.locus,s.flex,s["flex--nowrap"],s["gap-2"]].join(" "),children:e.jsx("div",{className:[n["locus__spot-ground"],s.flex,s["flex--center"]].join(" "),children:e.jsx("div",{className:n.locus__spot})})})]}),e.jsx("div",{className:n.hourly__time,children:`${c<10?"0":""}${c}:${i<10?"0":""}${i}`})]})},we=({props:t})=>{const[a]=m.useState({currentDate:new Date().getDate(),currentHour:new Date().getHours()}),c=["temperature_2m","relative_humidity_2m","rain","showers","weather_code","cloud_cover","wind_speed_10m","wind_direction_10m","is_day"].join(","),i=["temperature_2m","weather_code"],o=["temperature_2m_max","temperature_2m_min","apparent_temperature_max","apparent_temperature_min"].join(","),l=[O,`?latitude=${t.latitude}&longitude=${t.longitude}`,`&current=${c}`,`&hourly=${i}`,`&daily=${o}`,`&timezone=${t.timeZone}&forecast_days=1`].join(""),{data:r,isLoading:d,error:h}=V({url:l});if(d)return e.jsxs(e.Fragment,{children:[e.jsx(A,{cityName:"",children:e.jsx(I,{})}),e.jsx(R,{props:{hourlyTime:[],hourlyTemp:[],hourlyWeatherCode:[]},children:e.jsx(I,{})})]});if(h)return e.jsx(e.Fragment,{children:"Error"});const _=r.hourly.time.findIndex(F=>{let g=new Date(F);return a.currentDate===g.getDate()&&a.currentHour===g.getHours()});return e.jsxs(e.Fragment,{children:[e.jsxs(A,{cityName:t.cityName,children:[e.jsx(ge,{props:{isDay:r.current.is_day}}),e.jsx(pe,{props:{current:r.current,daily:r.daily,unitDegree:r.current_units.temperature_2m}}),e.jsx(je,{props:{weather_code:r.current.weather_code,isDay:r.current.is_day}}),e.jsx(_e,{props:{current:r.current,current_units:r.current_units}})]}),e.jsx(b.Provider,{value:{indexMatchingData:_},children:e.jsx(R,{props:{hourlyTime:r.hourly.time,hourlyTemp:r.hourly.temperature_2m,hourlyWeatherCode:r.hourly.weather_code,unit:r.hourly_units.temperature_2m}})})]})},Ne=()=>{const{selectedCity:t,timeZone:a}=m.useContext(b),[c]=t;return e.jsx(e.Fragment,{children:Object.keys(c).length>0&&e.jsx(we,{props:{latitude:c.latitude,longitude:c.longitude,timeZone:a,cityName:c.vietnamese_name}})})},B=({children:t})=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:[n.forecast,n.box,s["basis-md-12"],s["basis-12"]].join(" "),children:[e.jsx("h3",{className:[n.wwa__title,n["mb-20"]].join(" "),children:"Next 5 days forecast"}),e.jsx("div",{className:[n.forecast__wrap,s.grid,s["grid-md-5"],s["gap-3"]].join(" "),children:t})]})}),fe=({props:t})=>{const a=W[t.weather_code],c=new Date(t.datetime),i=T.weekdays[c.getDay()],o=T.months[c.getMonth()],l=c.getDate(),r=Number((t.temperature_min+t.temperature_max)/2).toFixed(1);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:n.forecast__item,children:[e.jsx("div",{className:[n.forecast__day,n["mb-8"]].join(" "),children:i}),e.jsxs("div",{className:n.forecast__detail,children:[e.jsxs("div",{className:[n.forecast__date,s.flex,s["flex--y"]].join(" "),children:[e.jsx("span",{children:o}),e.jsx("span",{children:l})]}),e.jsx("span",{className:n.forecast__temperature,children:`${r}${t.degree}`}),e.jsx("div",{className:[s.flex,s["flex--nowrap"],n["space-bet"]].join(" "),children:e.jsxs("div",{className:[s.flex,s["flex--y"],s["gap-1"]].join(" "),children:[a.day.icon_md,e.jsx("span",{children:a.day.description})]})})]})]})})},Ce=({props:t})=>{const a=["temperature_2m_max","temperature_2m_min","weather_code","rain_sum","showers_sum"].join(","),c=[O,`?latitude=${t.latitude}&longitude=${t.longitude}`,`&daily=${a}`,`&timezone=${t.timeZone}&forecast_days=6`].join(""),{data:i,isLoading:o,error:l}=V({url:c});return o?e.jsx(e.Fragment,{children:e.jsx(B,{children:e.jsx(I,{})})}):l?e.jsx(e.Fragment,{children:"Error"}):e.jsx(e.Fragment,{children:e.jsx(B,{children:i.daily.time.map((r,d)=>d>0&&e.jsx(fe,{props:{datetime:r,temperature_min:i.daily.temperature_2m_min[d],temperature_max:i.daily.temperature_2m_max[d],weather_code:i.daily.weather_code[d],degree:i.daily_units.temperature_2m_max}},d))})})},ve=()=>{const{selectedCity:t,timeZone:a}=m.useContext(b),[c]=t;return e.jsx(e.Fragment,{children:Object.keys(c).length>0&&e.jsx(Ce,{props:{latitude:c.latitude,longitude:c.longitude,timeZone:a,cityName:c.vietnamese_name}})})},Ee=({children:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:[n.wwa,s.flex,s["flex--wrap"],s["gap-4"]].join(" "),children:t})}),Se=()=>{const[t,a]=m.useState({isChecked:0});function c(i){a({isChecked:i.target.value})}return e.jsx(e.Fragment,{children:e.jsxs(Ee,{children:[e.jsx(le,{countriesData:k,handleChange:c,checkedCountry:t,setCheckedCountry:a}),e.jsxs(he,{countryData:{code:k[t.isChecked].countryCode,timezone:k[t.isChecked].timezone},children:[e.jsx(Ne,{}),e.jsx(ve,{})]})]})})},De=()=>e.jsx(e.Fragment,{children:e.jsx(Se,{})});export{De as default};
